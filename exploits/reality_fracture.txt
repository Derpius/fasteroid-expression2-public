@name exploits/reality_fracture
@inputs 
@outputs 
@persist A:array N Power Size MaxSize
@trigger 
runOnTick(1)

if(first()){
    # optional: write your own code to lock people inside if they dare enter
    Power = 200
    MaxSize = 500
    soundPlay("break",0,"physics/glass/glass_largesheet_break1.wav")
    soundPitch("break",155)
    soundPlay("horror",0,"music/radio1.mp3")
}

while(holoCanCreate() & N<Power & opcounter()<softQuota()){
    N++
    holoCreate(N)
    holoEntity(N):setTrails(500,500,10,"trails/smoke",vec(),255)
    holoAlpha(N,0)
    A[N,vector] = randvec():normalized()
}

I = 0
Size = min(Size+1,MaxSize)
while(I<N & opcounter()<softQuota()){
    I++
    local D = ceil(curtime()*1000 + I)%N + 1
    holoPos(I,entity():pos()+A[D,vector]*Size)
}


